<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<head th:replace="header :: copy"></head>
<head th:replace="header :: copy2"></head>

<script src="js/jquery-2.1.1.min.js"></script>
<style>
	.selected{
		cursor: pointer;
	}
	.selected:hover{
		background-color: #DD8E1E;
		color: white;
	}
	.seleccionada{
		background-color: #DD8E1E;
		color: white;
	}
	#scroll1 {
     overflow:scroll;
     height:200px;
     width:1000px;
	}
	#scroll1 table {
    width:1000px;
    background-color:#F2F2F2;
	}
	#bt_add {
		padding: 30px;
	    border-radius: 200px 200px 200px 200px;
		-moz-border-radius: 200px 200px 200px 200px;
		-webkit-border-radius: 200px 200px 200px 200px;
		border: 0px solid #000000;
		color: white;
	}
	#bt_del {
		padding: 30px;
	    border-radius: 200px 200px 200px 200px;
		-moz-border-radius: 200px 200px 200px 200px;
		-webkit-border-radius: 200px 200px 200px 200px;
		border: 0px solid #000000;
		color: white;
	}
</style>
<script th:inline="javascript">
	$(document).ready(function(){
		$('#bt_add').click(function(){
			agregar();
		});
		
		$('#bt_delall').click(function(){
			eliminarTodasFilas();
		});
		$('#bt_del').click(function(){
      		alertify.confirm("Estas seguro de que quiere eliminar",function(e){
        if (e) {
        	eliminar(id_fila_selected);
			
        }else{
        }
      });
    
    });
		
	});
	
	var cont=0;
	var id_fila_selected=[];
	function agregar(){
		var lista = document.getElementById("opciones");
		var indiceSeleccionado = lista.selectedIndex;
		var opcionSeleccionada = lista.options[indiceSeleccionado]; 
		var textoSeleccionado = opcionSeleccionada.text;
		var valorSeleccionado = opcionSeleccionada.value;
		var payments = [[${paymentList}]];
		
		
		var payment = $.grep(payments, function( n, i ) {
			  return n.id_p == valorSeleccionado	;
		});
		
		
		cont++;
		
	
		var fila='<tr class="selected" id="fila'+cont+'" onclick="seleccionar(this.id);"><td>'+cont+'</td><td>'+payment[0].descripcion+'</td><td>'+textoSeleccionado+'</td><td>'+payment[0].monto+'</td></tr>';
		
		$('#tabla').append(fila);
	
		reordenar();
	}
	function seleccionar(id_fila){
		if($('#'+id_fila).hasClass('seleccionada')){
			$('#'+id_fila).removeClass('seleccionada');
			id_fila_selected.pop(id_fila);
		}
		else{
			$('#'+id_fila).addClass('seleccionada');
			id_fila_selected.push(id_fila);
		}
		//2702id_fila_selected=id_fila;
	}
	
	function eliminar(id_fila){
		/*$('#'+id_fila).remove();
		reordenar();*/
		for(var i = 0; i != id_fila.length; i++){
			$('#'+id_fila[i]).remove();
		}
		reordenar();
	}
	
	function reordenar(){
		var num=1;
		$('#tabla tbody tr').each(function(){
			$(this).find('td').eq(0).text(num);
			num++;
		});
	}
</script>

<body>
	<div class="container">
		<center><h1 style=" padding-top: 40px; padding-bottom: 40px;">Seleccionar detalle de pago</h1></center>
	
		<div class="col-md-12">
			<div class="container" style="width: 80%;">
				<h3> Bienvenido <span th:text="${account.owner}">number></span></h3>
				<dl class="dl-horizontal">
					<dt>Código</dt>
					<dd th:text="${account.number}">number</dd>
					<dt>E-mail</dt>
					<dd th:text="${account.email}">number</dd>
					<dt>EAP</dt>
					<dd th:text="${account.eap}">number</dd>
					
					
				</dl>
				
				<div class="form-group">
			    	<label for="inputEmail3" class="col-sm-3 control-label" style= "font-size: 0.8em; padding-top: 5px;">Seleccionar detalle de pago:</label>
			    	<div class="col-sm-4">
			      		<select id="opciones" name="opciones" class="form-control" th:field="*{payment}">
						  	<option th:each="payment : ${paymentList}" 
          							th:value="${payment.id_p}" 
          							th:text="${payment.concepto}">
          					</option>
						</select>
			    	</div>
			    	<div class="col-sm-4">
			      		<a id="bt_add" class="btn btn-primary" style= "padding: 3.5px 10px;"><span class="glyphicon glyphicon-shopping-cart"></span> Agregar</a>
			      		<a id="bt_del" class="btn btn-danger" style= "padding: 3.5px 10px;"><span class="glyphicon glyphicon-trash"></span> Eliminar</a>
			    	</div>
			    	<div class="clearfix"> </div>
			  	</div>
				<div style="min-height: 300px;">
					<div id="scroll1">
					  	<table id="tabla" class="table table-bordered" style="width: 980px;">
						  	<thead>
								<tr>
									<td class="info">N°</td>
									<td class="active">Descripción</td>
								  	<td class="success">Concepto</td>
								  	<td class="warning">Monto</td>
								</tr>
							</thead>  	
						</table>
					</div>
					<div class="form-group">
					    <div class="col-sm-offset-4 col-md-8">
					    <br/>
					    <button type="button" class="btn btn-primary" th:action="@{/accountSearch}" style="float: right; padding: 20px; margin: 5px;"><span class="glyphicon glyphicon-send"></span> Salir</button>
					    <button type="submit" class="btn btn-primary" style="float: right; padding: 20px; margin: 5px;" href="src/main/resources/web-server/templates/procesarPago.html"><span class="glyphicon glyphicon-repeat"></span> Procesar</button>
					    </div>
					</div>
				</div>
				<div class="clearfix"> </div>
				</div>
			</div>		
		</div>

	
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    
	<div th:replace="footer :: copy3"></div>
</body>
</html>